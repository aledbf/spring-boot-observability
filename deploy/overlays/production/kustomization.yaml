apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: peanuts-app-production

namespace: peanuts-production

labels:
  - pairs:
      environment: production
    includeSelectors: false

resources:
  - ../../base

# Image will be updated by CI/CD pipeline
images:
  - name: peanuts-app
    newName: ghcr.io/bna/spring-boot-observability/app
    newTag: latest  # Updated by deploy workflow

patches:
  - path: patches/deployment.yaml
  - path: patches/configmap.yaml
  - path: patches/ingress.yaml
  - path: patches/hpa.yaml
